{% extends "base.html" %}

{% block title %}Contestants Gallery - Miss Gorgeous Hearts Pretoria 2026{% endblock %}

{% block nav_gallery %}active{% endblock %}

{% block content %}
<section class="page-header">
    <div class="container">
        <h1 class="page-title">Our Contestants</h1>
        <p class="page-subtitle">Vote for your favorite and help them become a finalist</p>
    </div>
</section>

<section class="gallery-section">
    <div class="container">
        <div class="gallery-filters">
            <button class="filter-btn active" data-filter="all">All Contestants</button>
            <button class="filter-btn" data-filter="semi-finalist">Semi-Finalists</button>
        </div>

        <div class="contestants-gallery">
            {% for contestant in contestants %}
            {% set vote_percentage = [((contestant.votes / 400) * 100), 100]|min %}
            <div class="gallery-card" data-status="{{ contestant.status|lower|replace(' ', '-') }}">
                <div class="gallery-image-wrapper">
                    <img src="{{ url_for('static', filename='images/' + contestant.image) }}" 
                         alt="{{ contestant.name }}"
                         onerror="this.src='{{ url_for('static', filename='images/placeholder.jpg') }}'">
                    <div class="gallery-overlay">
                        <div class="gallery-overlay-content">
                            <h3>{{ contestant.name }}</h3>
                            <p class="gallery-ref">{{ contestant.id }}</p>
                            <a href="{{ url_for('vote_page', contestant_id=contestant.id) }}" class="btn btn-primary">Vote Now</a>
                        </div>
                    </div>
                    <div class="gallery-status-badge">{{ contestant.status }}</div>
                </div>
                <div class="gallery-info">
                    <h3 class="gallery-name">{{ contestant.name }}</h3>
                    <p class="gallery-reference">Reference: {{ contestant.id }}</p>
                    <div class="gallery-votes">
                        <div class="votes-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: {{ vote_percentage }}%"></div>
                            </div>
                            <div class="progress-text">
                                <span class="current-votes">{{ contestant.votes }}</span> / 
                                <span class="target-votes">400 votes</span>
                            </div>
                        </div>
                        <p class="finalist-status">
                            {% if contestant.votes >= 400 %}
                            âœ“ Finalist Qualified
                            {% else %}
                            {{ 400 - contestant.votes }} votes to finalist
                            {% endif %}
                        </p>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<section class="cta-section">
    <div class="container">
        <div class="cta-content">
            <h2>Want to Join the Competition?</h2>
            <p>Entries are now open! No registration fee required.</p>
            <a href="https://wa.me/27673083980" class="btn btn-primary btn-large">Enter Now via WhatsApp</a>
        </div>
    </div>
</section>
{% endblock %}
